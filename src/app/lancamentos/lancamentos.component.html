<div class="content-fluid" role="main">

  <div>

    <div class="leftmost">
      <div class="header-padding">
        <div class="unselectable-line display-flex header-row" style=" align-items: center">

          <div class="el-tag--plain el-col-1">
            Tipo
            <button *ngIf="state==1" (click)="getColumnValues('Tipo')" [matMenuTriggerFor]="dropdown_menu" [matMenuTriggerData]="{ 'column': 'Tipo', 'class_msg':sortMessages.forType }" class="small-icon-button position-absolute" mat-icon-button >
              <mat-icon color="darker-primary" *ngIf="!activeSorts.Tipo.active && !activeFilters.Tipo">arrow_drop_down</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeFilters.Tipo">filter_alt</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.Tipo.active && activeFilters.Tipo" style="font-size: 15px; margin-left: -15px; line-height: 35px;">{{activeSorts.Tipo.dir}}</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.Tipo.active && !activeFilters.Tipo">{{activeSorts.Tipo.dir}}</mat-icon>
            </button>
            <button *ngIf="state==2" (click)="getColumnValues('Tipo')" [matMenuTriggerFor]="dropdown_menu" [matMenuTriggerData]="{ 'column': 'Tipo', 'class_msg':sortMessages.forType2 }" class="small-icon-button position-absolute" mat-icon-button >
              <mat-icon color="darker-primary" *ngIf="!activeSorts.Tipo.active && !activeFilters.Tipo">arrow_drop_down</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeFilters.Tipo">filter_alt</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.Tipo.active && activeFilters.Tipo" style="font-size: 15px; margin-left: -15px; line-height: 35px;">{{activeSorts.Tipo.dir}}</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.Tipo.active && !activeFilters.Tipo">{{activeSorts.Tipo.dir}}</mat-icon>
            </button>
          </div>

          <div class="el-tag--plain el-col-3">
            Datas
            <button (click)="getColumnValues('Vencimento')" [matMenuTriggerFor]="dropdown_menu" [matMenuTriggerData]="{ 'column': 'Vencimento', 'class_msg':sortMessages.forDates }" class="small-icon-button position-absolute" mat-icon-button >
              <mat-icon color="darker-primary" *ngIf="!activeSorts.Vencimento.active && !activeFilters.Vencimento">arrow_drop_down</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeFilters.Vencimento">filter_alt</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.Vencimento.active && activeFilters.Vencimento" style="font-size: 15px; margin-left: -15px; line-height: 35px;">{{activeSorts.Data_Entrada.dir}}</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.Vencimento.active && !activeFilters.Vencimento">{{activeSorts.Vencimento.dir}}</mat-icon>
            </button>

          </div>

          <div class="el-tag--plain el-col-4">
            Descrição
            <button (click)="getColumnValues('Descricao')" [matMenuTriggerFor]="dropdown_menu" [matMenuTriggerData]="{ 'column': 'Descricao' , 'class_msg': sortMessages.forText }" class="small-icon-button position-absolute" mat-icon-button >
              <mat-icon color="darker-primary" *ngIf="!activeSorts.Descricao.active && !activeFilters.Descricao">arrow_drop_down</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeFilters.Descricao">filter_alt</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.Descricao.active && activeFilters.Descricao" style="font-size: 15px; margin-left: -15px; line-height: 35px;">{{activeSorts.Descricao.dir}}</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.Descricao.active && !activeFilters.Descricao">{{activeSorts.Descricao.dir}}</mat-icon>
            </button>
          </div>

          <div class="el-tag--plain el-col-3">
            Valor
            <button (click)="getColumnValues('Valor')" [matMenuTriggerFor]="dropdown_menu" [matMenuTriggerData]="{ 'column': 'Valor', 'class_msg':sortMessages.forNumber }" class="small-icon-button position-absolute" mat-icon-button >
              <mat-icon color="darker-primary" *ngIf="!activeSorts.Valor.active && !activeFilters.Valor">arrow_drop_down</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeFilters.Valor">filter_alt</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.Valor.active && activeFilters.Valor" style="font-size: 15px; margin-left: -15px; line-height: 35px;">{{activeSorts.Valor.dir}}</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.Valor.active && !activeFilters.Valor">{{activeSorts.Valor.dir}}</mat-icon>
            </button>
          </div>

          <div class="el-tag--plain el-col-1">
            C.C.
            <button (click)="getColumnValues('CC')" [matMenuTriggerFor]="dropdown_menu" [matMenuTriggerData]="{ 'column': 'CC', 'class_msg':sortMessages.forText }" class="small-icon-button position-absolute" mat-icon-button >
              <mat-icon color="darker-primary" *ngIf="!activeSorts.CC.active && !activeFilters.CC">arrow_drop_down</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeFilters.CC">filter_alt</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.CC.active && activeFilters.CC" style="font-size: 15px; margin-left: -15px; line-height: 35px;">{{activeSorts.CC.dir}}</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.CC.active && !activeFilters.CC">{{activeSorts.CC.dir}}</mat-icon>
            </button>
          </div>

          <div class="el-tag--plain el-col-3">
            Div. C.C
            <button (click)="getColumnValues('Div_CC')" [matMenuTriggerFor]="dropdown_menu" [matMenuTriggerData]="{ 'column': 'Div_CC', 'class_msg':sortMessages.forNumber }" class="small-icon-button position-absolute" mat-icon-button >
              <mat-icon color="darker-primary" *ngIf="!activeSorts.Div_CC.active && !activeFilters.Div_CC">arrow_drop_down</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeFilters.Div_CC">filter_alt</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.Div_CC.active && activeFilters.Div_CC" style="font-size: 15px; margin-left: -15px; line-height: 35px;">{{activeSorts.Div_CC.dir}}</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.Div_CC.active && !activeFilters.Div_CC">{{activeSorts.Div_CC.dir}}</mat-icon>
            </button>
          </div >

          <div class="el-tag--plain el-col-3">
            Vence em
            <button (click)="getColumnValues('Vencimento')" [matMenuTriggerFor]="dropdown_menu" [matMenuTriggerData]="{ 'column': 'Vencimento', 'class_msg':sortMessages.forExpire }" class="small-icon-button position-absolute" mat-icon-button >
              <mat-icon color="darker-primary" *ngIf="!activeSorts.Vencimento.active && !activeFilters.Vencimento">arrow_drop_down</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeFilters.Vencimento">filter_alt</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.Vencimento.active && activeFilters.Vencimento" style="font-size: 15px; margin-left: -15px; line-height: 35px;">{{activeSorts.Vencimento.dir}}</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.Vencimento.active && !activeFilters.Vencimento">{{activeSorts.Vencimento.dir}}</mat-icon>
            </button>
          </div>

          <div class="el-tag--plain el-col-2">
            Pessoa
            <button (click)="getColumnValues('Pessoa')" [matMenuTriggerFor]="dropdown_menu" [matMenuTriggerData]="{ 'column': 'Pessoa', 'class_msg':sortMessages.forText }" class="small-icon-button position-absolute" mat-icon-button >
              <mat-icon color="darker-primary" *ngIf="!activeSorts.Pessoa.active && !activeFilters.Pessoa">arrow_drop_down</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeFilters.Pessoa">filter_alt</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.Pessoa.active && activeFilters.Pessoa" style="font-size: 15px; margin-left: -15px; line-height: 35px;">{{activeSorts.Pessoa.dir}}</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.Pessoa.active && !activeFilters.Pessoa">{{activeSorts.Pessoa.dir}}</mat-icon>
            </button>
          </div>

          <div class="el-tag--plain el-col-2">
            Resp.
            <button (click)="getColumnValues('Responsavel')" [matMenuTriggerFor]="dropdown_menu" [matMenuTriggerData]="{ 'column': 'Responsavel', 'class_msg':sortMessages.forText }" class="small-icon-button position-absolute" mat-icon-button >
              <mat-icon color="darker-primary" *ngIf="!activeSorts.Responsavel.active && !activeFilters.Responsavel">arrow_drop_down</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeFilters.Responsavel">filter_alt</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.Responsavel.active && activeFilters.Responsavel" style="font-size: 15px; margin-left: -15px; line-height: 35px;">{{activeSorts.Responsavel.dir}}</mat-icon>
              <mat-icon color="darker-primary" style="font-size: 18px" *ngIf="activeSorts.Responsavel.active && !activeFilters.Responsavel">{{activeSorts.Responsavel.dir}}</mat-icon>
            </button>
          </div>

          <div class="el-tag--plain el-col-1">
            Obs
          </div>

        </div>
      </div>


      <cdk-virtual-scroll-viewport *ngIf="!cdk_empty && !loading; else elseBlock" itemSize="94" (scrolledIndexChange)="scroll_func($event)">

        <div style="padding-bottom: 10px;" *cdkVirtualFor="let Entrada of Entradas, let i=index"  >

          <mat-card (contextmenu)="onContextMenu($event, Entrada, i)">
            <mat-card-content>
              <div *ngIf="Entrada.Imposto" class="unselectable-line imposto">
                C/ IMPOSTO
              </div>
              <div *ngIf="Entrada.Tipo_despesa == 'F'" class="unselectable-line imposto">
                FIXA
              </div>
              <div *ngIf="Entrada.Tipo_despesa == 'V'" class="unselectable-line imposto">
                VARIÁVEL
              </div>
              <div class="unselectable-line display-flex" style=" align-items: center">
                <div class="el-tag--plain el-col-1">
                    <button *ngIf="Entrada.Tipo == 1" mat-mini-fab color="warn">
                      <mat-icon >remove</mat-icon>
                    </button>
                  <button *ngIf="Entrada.Tipo == 0" mat-mini-fab color="success">
                    <mat-icon >add</mat-icon>
                  </button>
                  <button *ngIf="Entrada.Tipo == 2" mat-mini-fab color="accent" style="color: white;">
                    <mat-icon >show_chart</mat-icon>
                  </button>
                  <span *ngIf="Entrada.Tipo == 2 && Entrada.N_Invest"  class="blue-dot">
                    {{Entrada.N_Invest}}
                  </span>

                  <button *ngIf="Entrada.Tipo == 3  && !Entrada.Concluido" mat-mini-fab color="success">
                    <mat-icon >arrow_downward</mat-icon>
                  </button>

                  <button *ngIf="Entrada.Tipo == 4 && !Entrada.Concluido" mat-mini-fab color="warn">
                    <mat-icon >arrow_upward</mat-icon>
                  </button>

                </div>

                <div class="el-tag--plain el-col-3" style="align-items: center;">
                  <div style="font-size: 0.7vw; ">
                    <img src="assets/icons8-time-24.png" width="13vw" >
                     {{ Entrada.Data_Entrada | amLocal | amDateFormat: 'DD/MM/YYYY' }}</div>
                  <div style="font-size: 0.7vw;"><img src="assets/icons8-expired-26.png" width="13vw">
                    {{ Entrada.Vencimento | amLocal | amDateFormat: 'DD/MM/YYYY' }}</div>
                </div>

                <div class="el-tag--plain el-col-4">
                  {{Entrada.Descricao}}
                </div>

                <div class="el-tag--plain el-col-3">
                  {{ Entrada.Valor | currency:'BRL'}}
                </div>

                <div class="el-tag--plain el-col-1">
                  {{Entrada.CC}}
                </div>


                <div class="el-tag--plain el-col-3">
                  {{Entrada.Div_CC}}
                </div >

                <div class="el-tag--plain el-col-3">
                  Em {{Entrada.Vencimento | amDifference: today :'days' : false}} dias
                </div>

                <div class="el-tag--plain el-col-2">
                  {{Entrada.Pessoa}}
                </div>

                <div class="el-tag--plain el-col-2">
                  {{Entrada.Responsavel}}
                </div>

                <div class="el-tag--plain el-col-1">
                <button *ngIf="Entrada.Observacao; else elseBlockOBS" disabled mat-icon-button style="color: black;">
                  <mat-icon  matTooltip="{{Entrada.Observacao}}">info</mat-icon>
                </button>

                <ng-template #elseBlockOBS>
                  <button disabled mat-icon-button>
                    <mat-icon>info</mat-icon>
                  </button>
                </ng-template>
              </div>

              </div>

            </mat-card-content>

          </mat-card>
        </div>

      </cdk-virtual-scroll-viewport>

      <span *ngIf="!loading" class="footer-row">
        <span><button style=" margin-top: 20px;" (click)="clearAllFilters()" mat-raised-button color="warn" type="button"><mat-icon style="font-size: 20px;">delete</mat-icon>Excluir todos os filtros</button></span>
        <div style="margin: auto 0; justify-self: center; width: 70%;display: flex; justify-content: space-evenly;">
          <span *ngIf="state === 1">
            <button  class="mdb-30" mat-mini-fab color="success">
              <mat-icon >add</mat-icon>
            </button>
            <span style="font-size: 22px;color: rgb(0,128,0); font-weight: bolder; margin-top: 15px;">{{totalReceitas | currency:'BRL'}}</span>
          </span>

          <span *ngIf="state === 1">
            <button  class="mdb-30" mat-mini-fab color="warn">
              <mat-icon >remove</mat-icon>
            </button>
            <span style="font-size: 22px;color: rgb(244,67,54); font-weight: bolder; margin-top: 15px;">{{ totalDespesas | currency:'BRL'}}</span>

          </span>

          <span *ngIf="state === 1">
            <button  class="mdb-30" mat-mini-fab color="accent" style="color: white;">
              <mat-icon >show_chart</mat-icon>
            </button>
            <span style="font-size: 22px;color: rgb(255,215,64); font-weight: bolder; margin-top: 15px;">{{ totalInvestimentos | currency:'BRL'}}</span>
          </span>
        </div>
      </span>


      <ng-template #elseBlock>
        <cdk-virtual-scroll-viewport itemSize="94">
          <div *ngIf="!loading" style="padding-top: 20px; display: flex;
          justify-content: center;
          align-items: center;">
            <mat-card class="empty-results-disclaimer">
              <mat-card-content style="font-size: 1.1vw;">Nada para mostrar</mat-card-content>

            </mat-card>
          </div>
          <div *ngIf="loading" class="loading-indicator">
            <mat-spinner></mat-spinner>
            <div>Carregando...</div>
          </div>
        </cdk-virtual-scroll-viewport>
      </ng-template>



      <div style="visibility: hidden; position: fixed"
      [style.left]="contextMenuPosition.x"
      [style.top]="contextMenuPosition.y"
      [matMenuTriggerFor]="contextMenu"
      #contextMenuTrigger="matMenuTrigger">
       </div>
      <mat-menu #contextMenu="matMenu" >
        <ng-template matMenuContent let-item="item" let-index = "index">
          <button mat-menu-item (click)="editLine(index)">Editar</button>
          <button mat-menu-item (click)="deleteLine(item,index)">Deletar</button>
        </ng-template>
      </mat-menu>


      <mat-menu #dropdown_menu="matMenu">
        <ng-template  matMenuContent let-column="column" let-class_msg="class_msg">
        <button [matMenuTriggerData]="{ 'values': this.filterValues , 'column' : column}" [matMenuTriggerFor]="filtrar" mat-menu-item>
          <mat-icon>filter_alt</mat-icon>
          Filtrar
        </button>
        <button [matMenuTriggerData]="{ 'column': column, 'class_msg' : class_msg }" [matMenuTriggerFor]="classificar" mat-menu-item>
          <mat-icon>sort</mat-icon>
          Classificar
        </button>
        <button *ngIf="activeFilters[column]" mat-menu-item (click)="clearFilter(column)">
          <mat-icon>clear</mat-icon>
          Excluir filtro
        </button>
      </ng-template>
      </mat-menu>

      <mat-menu #filtrar="matMenu">
        <ng-template  matMenuContent let-values="values" let-column="column" let-class_msg="class_msg">
          <div (click)="filterBy(column, item)" *ngFor="let item of values">

            <div *ngIf="(column === 'Vencimento' || column === 'Data_Entrada'); then filtrarElseBlock1; else filtrarElseBlock2"></div>
            <ng-template #filtrarElseBlock1>

              <button mat-menu-item>{{ item | amLocal | amDateFormat: 'DD/MM/YYYY' }}</button>

            </ng-template>

            <ng-template #filtrarElseBlock2>
              <div *ngIf="column === 'Valor'; then filtrarElseBlock3; else filtrarElseBlock4">
            </div>
            <ng-template #filtrarElseBlock3><button mat-menu-item>{{ item | currency:'BRL'}}</button> </ng-template>
            <ng-template #filtrarElseBlock4><button mat-menu-item>{{ item | Tipo}}</button> </ng-template>
            </ng-template>

            </div>
            </ng-template>

      </mat-menu>

      <mat-menu  #classificar="matMenu">
        <ng-template  matMenuContent let-column="column" let-class_msg="class_msg">
        <button mat-menu-item (click)="sortBy(column, 'ASC')"><mat-icon>arrow_downward</mat-icon>{{class_msg.up}}</button>
        <button mat-menu-item (click)="sortBy(column, 'DESC')"><mat-icon>arrow_upward</mat-icon>{{class_msg.down}}</button>
      </ng-template>
      </mat-menu>

    </div>

    <div class="rightmost">

      <form focusNext [formGroup]="newEntryForm">

        <div class="button-selector">

          <div class="el-tag--plain">
            Tipo
          </div>

          <div class="button-row button-container">

            <button *ngIf="state===1" name="addButton" type="button" mat-mini-fab color="success" class="selection-button" (click)="selectType(0)">
              <mat-icon>add</mat-icon>
            </button>
            <button *ngIf="state===1" name="removeButton"  type="button" mat-mini-fab color="warn" class="selection-button" (click)="selectType(1)">
              <mat-icon>remove</mat-icon>
            </button>

            <button *ngIf="state===1" name="investButton" type="button" mat-mini-fab color="accent" class="selection-button" style="color: white;" (click)="selectType(2)">
              <mat-icon>show_chart</mat-icon>
            </button>

            <button *ngIf="state===2" name="outButton" type="button" mat-mini-fab color="warn" class="selection-button"(click)="selectType(4)">
              <mat-icon>arrow_upward</mat-icon>
            </button>

            <button *ngIf="state===2" name="inButton" type="button" mat-mini-fab color="success" class="selection-button"(click)="selectType(3)">
              <mat-icon>arrow_downward</mat-icon>
            </button>
          </div>

          <mat-error *ngIf="newEntryForm.get('Tipo').hasError('required') && newEntryForm.dirty" style="font-size: 1.5vh; text-align: center;">
            É necessário selecionar um tipo de entrada.
          </mat-error>

        </div>

        <div class="button-selector">

          <div class="el-tag--plain">
            Responsável
          </div>

        <div class="button-row button-container">

          <button name="CButton" type="button" mat-mini-fab style="background-color: black; color: white;" class="selection-button" (click)="selectResp('Coil')">
            <a style="font-size: 15px; font-weight: bolder;">Coil</a>
          </button>
          <button name="ZButton"  type="button" mat-mini-fab style="background-color: black; color: white;" color="warn" class="selection-button" (click)="selectResp('Zep')">
            <a style="font-size: 15px; font-weight: bolder;">Zep</a>
          </button>

        </div>

        <mat-error *ngIf="newEntryForm.get('Responsavel').hasError('required') && newEntryForm.dirty" style="font-size: 1.5vh; text-align: center;">
          É necessário selecionar um responsável.
        </mat-error>

      </div>
      <div class="formulario">
      <div>
          <mat-form-field style="width: 100%;" class="form-field">
            <mat-label>Descrição</mat-label>
            <input matInput formControlName="Descricao" [errorStateMatcher]="errorMatcher">
            <mat-error *ngIf="newEntryForm.get('Descricao').hasError('required')" >
              É necessário inserir uma descrição.
            </mat-error>
          </mat-form-field>
        </div>

        <mat-form-field style="width: 40%;" class="form-field noselect">
          <mat-label>Valor</mat-label>
          <input class="noselect"  matInput formControlName="Valor" [errorStateMatcher]="errorMatcher"   >

          <mat-error *ngIf="newEntryForm.get('Valor').hasError('required')" >
            É necessário inserir um valor.
          </mat-error>

          <mat-hint> </mat-hint>
        </mat-form-field>

        <mat-form-field style="width: 35%;" class="form-field">
          <mat-label>Data de entrada</mat-label>
          <input matInput formControlName="Data_Entrada" [matDatepicker]="picker1">
          <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
          <mat-datepicker #picker1></mat-datepicker>
          <mat-error *ngIf="newEntryForm.get('Data_Entrada').hasError('required')" >
            É necessário inserir uma data de entrada válida.
          </mat-error>
        </mat-form-field>

        <mat-form-field style="width: 40%;" class="form-field">
          <mat-label>Data de vencimento</mat-label>
          <input matInput formControlName="Vencimento" [matDatepicker]="picker2">
          <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
          <mat-datepicker #picker2></mat-datepicker>
          <mat-error *ngIf="newEntryForm.get('Vencimento').hasError('required')" >
            É necessário inserir uma data de vencimento válida.
          </mat-error>
        </mat-form-field>

        <mat-form-field style="width: 35%;" class="form-field">
          <mat-label>Centro de Custo</mat-label>
          <mat-select formControlName="CC">
          <mat-option (click)="get_div_cc(cc.Nome)" *ngFor="let cc of CC" [value]="cc">
           {{ cc.Descricao }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="newEntryForm.get('Div_CC').hasError('required')" >
          É necessário inserir um de centro de custo.
        </mat-error>
      </mat-form-field>

      <button type="button" mat-icon-button color="primary" (click)="openCCDialog()">
        <mat-icon>add</mat-icon>
      </button>

      <mat-form-field  style="width: 40%;" class="form-field">
        <mat-label>Divisão Centro de Custo</mat-label>
        <mat-select [disabled]="!div_cc_ready" formControlName="Div_CC">
        <mat-option *ngFor="let div_CC of div_CC" [value]="div_CC">
         {{ div_CC.Divisao }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="newEntryForm.get('Div_CC').hasError('required')" >
        É necessário inserir uma divisão de centro de custo.
      </mat-error>
    </mat-form-field>

  <mat-form-field *ngIf="newEntryForm.get('Tipo').value === 0 || newEntryForm.get('Tipo').value === 4" style="width: 35%;" class="form-field">
      <mat-label>Origem</mat-label>
      <mat-select formControlName="Pessoa">
        <mat-option *ngFor="let pessoa of Pessoa" [value]="pessoa">
          {{ pessoa.Nome }}
         </mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field *ngIf="newEntryForm.get('Tipo').value === 1 || newEntryForm.get('Tipo').value === 3" style="width: 35%;" class="form-field">
      <mat-label>Destinatário</mat-label>
      <mat-select formControlName="Pessoa">
      <mat-option *ngFor="let pessoa of Pessoa" [value]="pessoa">
       {{ pessoa.Nome }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <button *ngIf="newEntryForm.get('Tipo').value === 1 || newEntryForm.get('Tipo').value === 0" type="button" mat-icon-button color="primary" (click)="openPessoaDialog()">
    <mat-icon>add</mat-icon>
  </button>

  <mat-form-field *ngIf="newEntryForm.get('Tipo').value === 2" style="width: 40%;" class="form-field">
    <mat-label>Nº do Investimento</mat-label>
    <input matInput formControlName="N_Invest" [errorStateMatcher]="errorMatcher"   >

    <mat-error *ngIf="newEntryForm.get('N_Invest').hasError('pattern')" >
      O número de investimento deve ser um número.
    </mat-error>
</mat-form-field>
<div>
  <mat-form-field *ngIf="newEntryForm.get('Tipo').value === 0 " style="width: 35%;" class="form-field">
    <mat-label>Tem imposto?</mat-label>
    <mat-select formControlName="Imposto">
      <mat-option *ngFor="let imp of Imposto" [value]="imp">
        {{ imp.text }}
       </mat-option>
  </mat-select>
  </mat-form-field>

  <mat-form-field *ngIf="newEntryForm.get('Tipo').value === 1" style="width: 35%;" class="form-field">
    <mat-label>Variável/Fixa</mat-label>
    <mat-select formControlName="Tipo_despesa">
    <mat-option *ngFor="let desp of Tipo_despesa" [value]="desp">
     {{ desp.text }}
    </mat-option>
  </mat-select>
  </mat-form-field>
</div>


    <div>
      <mat-form-field style="width: 100%;" class="example-full-width">
        <mat-label>Observação</mat-label>
        <textarea matInput formControlName="Observacao" [errorStateMatcher]="errorMatcher"></textarea>
      </mat-form-field>
    </div>
      </div>

      <div class="button-row">
        <button mat-raised-button  (click)='onSubmit()' [disabled]="!newEntryForm.valid">Concluir</button>
        <button mat-raised-button   (click)='onClear()' type="button">Limpar</button>
      </div>

      </form>

    </div>

  </div>
