
<div class="toolbar" role="banner">
  <img
    width="40"
    alt="Angular Logo"
    src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg=="
  />
  <span>Bem vindo</span>
    <div class="spacer"></div>
    <a aria-label="Angular on twitter" target="_blank" rel="noopener" title="Notificações">
      <img style="filter: invert();" src="assets/icons8-bell-24.png">
    </a>
</div>



<div class="content-fluid" role="main">

  <div class="row">

    <div class="leftmost">
      <div class="header-padding">
        <div class="unselectable-line display-flex header-row" style=" align-items: center">

          <div class="el-tag--plain el-col-1">
            Tipo
            <button class="small-icon-button position-absolute" mat-icon-button color="primary">
              <mat-icon>arrow_drop_down</mat-icon>
              <!-- <mat-icon>filter_alt</mat-icon> -->
            </button>
          </div>

          <div class="el-tag--plain el-col-3">
            Datas
            <button [matMenuTriggerFor]="menu" class="small-icon-button position-absolute" mat-icon-button color="primary">
              <!-- <mat-icon>arrow_drop_down</mat-icon> -->
              <mat-icon>filter_alt</mat-icon>
              <mat-icon style="font-size: 15px; margin-left: -15px; line-height: 35px;">arrow_downward</mat-icon>
            </button>

            <mat-menu #menu="matMenu">
              <button [matMenuTriggerFor]="filtrar" mat-menu-item>Filtrar</button>
              <button [matMenuTriggerFor]="classificar" mat-menu-item>Classificar</button>
            </mat-menu>

            <mat-menu #filtrar="matMenu">
              <button mat-menu-item>Fishes</button>
              <button mat-menu-item>Amphibians</button>
              <button mat-menu-item>Reptiles</button>
              <button mat-menu-item>Birds</button>
              <button mat-menu-item>Mammals</button>
            </mat-menu>

            <mat-menu #classificar="matMenu">
              <button mat-menu-item (click)="sortBy('Data_Entrada', 'DESC')"><mat-icon>arrow_downward</mat-icon>Ascendente</button>
              <button mat-menu-item (click)="sortBy('Data_Entrada', 'ASC')"><mat-icon>arrow_upward</mat-icon>Descendente</button>
            </mat-menu>

          </div>

          <div class="el-tag--plain el-col-4">
            Descrição
            <button class="small-icon-button position-absolute" mat-icon-button color="primary">
              <mat-icon>arrow_drop_down</mat-icon>
              <!-- <mat-icon>filter_alt</mat-icon> -->
            </button>
          </div>

          <div class="el-tag--plain el-col-3">
            Valor
            <button class="small-icon-button position-absolute" mat-icon-button color="primary">
              <mat-icon>arrow_drop_down</mat-icon>
              <!-- <mat-icon>filter_alt</mat-icon> -->
            </button>
          </div>

          <div class="el-tag--plain el-col-2">
            C.C.
            <button class="small-icon-button position-absolute" mat-icon-button color="primary">
              <mat-icon>arrow_drop_down</mat-icon>
              <!-- <mat-icon>filter_alt</mat-icon> -->
            </button>
          </div>

          <div class="el-tag--plain el-col-2">
            Div. C.C
            <button class="small-icon-button position-absolute" mat-icon-button color="primary">
              <mat-icon>arrow_drop_down</mat-icon>
              <!-- <mat-icon>filter_alt</mat-icon> -->
            </button>
          </div >

          <div class="el-tag--plain el-col-3">
            Vence em
            <button class="small-icon-button position-absolute" mat-icon-button color="primary">
              <mat-icon>arrow_drop_down</mat-icon>
              <!-- <mat-icon>filter_alt</mat-icon> -->
            </button>
          </div>

          <div class="el-tag--plain el-col-2">
            Pessoa
            <button class="small-icon-button position-absolute" mat-icon-button color="primary">
              <mat-icon>arrow_drop_down</mat-icon>
              <!-- <mat-icon>filter_alt</mat-icon> -->
            </button>
          </div>

          <div class="el-tag--plain el-col-2">
            Resp.
            <button class="small-icon-button position-absolute" mat-icon-button color="primary">
              <mat-icon>arrow_drop_down</mat-icon>
              <!-- <mat-icon>filter_alt</mat-icon> -->
            </button>
          </div>

          <div class="el-tag--plain el-col-1">
            Obs
          </div>

        </div>
      </div>


      <cdk-virtual-scroll-viewport *ngIf="!cdk_empty; else elseBlock" itemSize="94" (scrolledIndexChange)="scroll_func($event)">

        <div style="padding-bottom: 10px;" *cdkVirtualFor="let Entrada of Entradas, let i=index"  >

          <mat-card class="card" (contextmenu)="onContextMenu($event, Entrada, i)">
            <mat-card-content>
              <div class="unselectable-line display-flex" style=" align-items: center">
                <div class="el-tag--plain el-col-1">
                    <button *ngIf="Entrada.Tipo == 1" mat-mini-fab color="warn">
                      <mat-icon >remove</mat-icon>
                    </button>
                  <button *ngIf="Entrada.Tipo == 0" mat-mini-fab color="success">
                    <mat-icon >add</mat-icon>
                  </button>
                  <div>
                  <button *ngIf="Entrada.Tipo == 2" mat-mini-fab color="accent" style="color: white;">
                    <mat-icon >show_chart</mat-icon>
                  </button>
                  <span *ngIf="Entrada.Tipo == 2 && Entrada.N_Invest" color="blue" class="blue-dot">
                    {{Entrada.N_Invest}}
                  </span>
                </div>
                </div>

                <div class="el-tag--plain el-col-3" style="align-items: center;">
                  <div style="font-size: 0.7vw; ">
                    <img src="assets/icons8-time-24.png" width="13vw" >
                     {{ Entrada.Data_Entrada | amLocal | amDateFormat: 'DD/MM/YYYY' }}</div>
                  <div style="font-size: 0.7vw;"><img src="assets/icons8-expired-26.png" width="13vw">
                    {{ Entrada.Vencimento | amLocal | amDateFormat: 'DD/MM/YYYY' }}</div>
                </div>

                <div class="el-tag--plain el-col-4">
                  {{Entrada.Descricao}}
                </div>

                <div class="el-tag--plain el-col-3">
                  {{ Entrada.Valor | currency:'BRL'}}
                </div>

                <div class="el-tag--plain el-col-2">
                  {{Entrada.CC}}
                </div>


                <div class="el-tag--plain el-col-2">
                  {{Entrada.Div_CC}}
                </div >

                <div class="el-tag--plain el-col-3">
                  Em {{Entrada.Vencimento | amDifference: today :'days' : false}} dias
                </div>

                <div class="el-tag--plain el-col-2">
                  {{Entrada.Nome_f}}
                </div>

                <div class="el-tag--plain el-col-2">
                  {{Entrada.Responsavel}}
                </div>

                <div class="el-tag--plain el-col-1">
                <button *ngIf="Entrada.Observacao; else elseBlockOBS" disabled mat-icon-button style="color: black;">
                  <mat-icon  matTooltip="{{Entrada.Observacao}}">info</mat-icon>
                </button>

                <ng-template #elseBlockOBS>
                  <button disabled mat-icon-button>
                    <mat-icon>info</mat-icon>
                  </button>
                </ng-template>
              </div>

              </div>

            </mat-card-content>

          </mat-card>
        </div>

      </cdk-virtual-scroll-viewport>
      <div style="visibility: hidden; position: fixed"
      [style.left]="contextMenuPosition.x"
      [style.top]="contextMenuPosition.y"
      [matMenuTriggerFor]="contextMenu">
       </div>
      <mat-menu #contextMenu="matMenu">
        <ng-template matMenuContent let-item="item" let-index = "index">
          <button mat-menu-item (click)="editLine(item,index)">Editar</button>
          <button mat-menu-item (click)="deleteLine(item,index)">Deletar</button>
        </ng-template>
      </mat-menu>

      <ng-template #elseBlock>
        <div style="padding-top: 20px; display: flex;
        justify-content: center;
        align-items: center;">
          <mat-card class="empty-results-disclaimer">
            <mat-card-content>Nada para mostrar</mat-card-content>

          </mat-card>
        </div>


      </ng-template>
    </div>

    <div class="rightmost">

      <form focusNext [formGroup]="newEntryForm">

        <div class="button-selector">

          <div class="el-tag--plain">
            Tipo
          </div>

          <div class="button-row button-container">

            <button name="addButton" type="button" mat-mini-fab color="success" class="selection-button" (click)="selectType(0)">
              <mat-icon>add</mat-icon>
            </button>
            <button name="removeButton"  type="button" mat-mini-fab color="warn" class="selection-button" (click)="selectType(1)">
              <mat-icon>remove</mat-icon>
            </button>

            <button name="investButton" type="button" mat-mini-fab color="accent" class="selection-button" style="color: white;" (click)="selectType(2)">
              <mat-icon>show_chart</mat-icon>
            </button>
          </div>

          <mat-error *ngIf="newEntryForm.get('Tipo').hasError('required') && newEntryForm.dirty" style="font-size: 1.5vh; text-align: center;">
            É necessário selecionar um tipo de entrada.
          </mat-error>

        </div>

        <div class="button-selector">

          <div class="el-tag--plain">
            Responsável
          </div>

        <div class="button-row button-container">

          <button name="CButton" type="button" mat-mini-fab style="background-color: black; color: white;" class="selection-button" (click)="selectResp('Coil')">
            <a style="font-size: 2vh; font-weight: bolder;">Coil</a>
          </button>
          <button name="ZButton"  type="button" mat-mini-fab style="background-color: black; color: white;" color="warn" class="selection-button" (click)="selectResp('Zep')">
            <a style="font-size: 2vh; font-weight: bolder;">Zep</a>
          </button>

        </div>

        <mat-error *ngIf="newEntryForm.get('Responsavel').hasError('required') && newEntryForm.dirty" style="font-size: 1.5vh; text-align: center;">
          É necessário selecionar um responsável.
        </mat-error>

      </div>
      <div class="formulario">
      <div>
          <mat-form-field style="width: 100%;" class="form-field">
            <mat-label>Descrição</mat-label>
            <input matInput formControlName="Descricao" [errorStateMatcher]="errorMatcher">
            <mat-error *ngIf="newEntryForm.get('Descricao').hasError('required')" >
              É necessário inserir uma descrição.
            </mat-error>
          </mat-form-field>
        </div>

        <mat-form-field style="width: 40%;" class="form-field noselect">
          <mat-label>Valor</mat-label>
          <input class="noselect"  matInput formControlName="Valor" [errorStateMatcher]="errorMatcher"   >

          <mat-error *ngIf="newEntryForm.get('Valor').hasError('required')" >
            É necessário inserir um valor.
          </mat-error>

          <mat-hint> </mat-hint>
        </mat-form-field>

        <mat-form-field style="width: 35%;" class="form-field">
          <mat-label>Data de entrada</mat-label>
          <input matInput formControlName="Data_Entrada" [matDatepicker]="picker1">
          <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
          <mat-datepicker #picker1></mat-datepicker>
          <mat-error *ngIf="newEntryForm.get('Data_Entrada').hasError('required')" >
            É necessário inserir uma data de entrada válida.
          </mat-error>
        </mat-form-field>

        <mat-form-field style="width: 35%;" class="form-field">
          <mat-label>Data de vencimento</mat-label>
          <input matInput formControlName="Vencimento" [matDatepicker]="picker2">
          <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
          <mat-datepicker #picker2></mat-datepicker>
          <mat-error *ngIf="newEntryForm.get('Vencimento').hasError('required')" >
            É necessário inserir uma data de vencimento válida.
          </mat-error>
        </mat-form-field>

        <mat-form-field style="width: 45%;" class="form-field">
          <mat-label>Centro de Custo</mat-label>
          <mat-select formControlName="CC">
          <mat-option *ngFor="let cc of CC.nomes" [value]="cc">
           {{ cc }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="newEntryForm.get('Div_CC').hasError('required')" >
          É necessário inserir um de centro de custo.
        </mat-error>
      </mat-form-field>

      <mat-form-field style="width: 45%;" class="form-field">
        <mat-label>Divisão Centro de Custo</mat-label>
        <mat-select formControlName="Div_CC">
        <mat-option *ngFor="let cc of CC.numero" [value]="cc">
         {{ cc }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="newEntryForm.get('Div_CC').hasError('required')" >
        É necessário inserir uma divisão de centro de custo.
      </mat-error>
    </mat-form-field>

  <mat-form-field *ngIf="newEntryForm.get('Tipo').value === 0" style="width: 40%;" class="form-field">
      <mat-label>Origem</mat-label>
      <mat-select formControlName="Nome_f">
      <mat-option *ngFor="let dest of Destinatarios.nomes" [value]="dest">
       {{ dest }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field *ngIf="newEntryForm.get('Tipo').value === 1" style="width: 40%;" class="form-field">
      <mat-label>Destinatário</mat-label>
      <mat-select formControlName="Nome_f">
      <mat-option *ngFor="let dest of Destinatarios.nomes" [value]="dest">
       {{ dest }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field *ngIf="newEntryForm.get('Tipo').value === 2" style="width: 40%;" class="form-field">
    <mat-label>Nº do Investimento</mat-label>
    <input matInput formControlName="N_Invest" [errorStateMatcher]="errorMatcher"   >

    <mat-error *ngIf="newEntryForm.get('N_Invest').hasError('pattern')" >
      O número de investimento deve ser um número.
    </mat-error>
</mat-form-field>

    <div>
      <mat-form-field style="width: 100%;" class="example-full-width">
        <mat-label>Observação</mat-label>
        <textarea matInput formControlName="Observacao" [errorStateMatcher]="errorMatcher"></textarea>
      </mat-form-field>
    </div>
      </div>

      <div class="button-row">
        <button mat-raised-button color="blue" (click)='onSubmit()' [disabled]="!newEntryForm.valid">Concluir</button>
        <button mat-raised-button color="blue"  (click)='onClear()' type="button">Limpar</button>
      </div>

      </form>

    </div>

  </div>


  <svg id="clouds" alt="Gray Clouds Background" xmlns="http://www.w3.org/2000/svg" width="2611.084" height="485.677" viewBox="0 0 2611.084 485.677">
    <path id="Path_39" data-name="Path 39" d="M2379.709,863.793c10-93-77-171-168-149-52-114-225-105-264,15-75,3-140,59-152,133-30,2.83-66.725,9.829-93.5,26.25-26.771-16.421-63.5-23.42-93.5-26.25-12-74-77-130-152-133-39-120-212-129-264-15-54.084-13.075-106.753,9.173-138.488,48.9-31.734-39.726-84.4-61.974-138.487-48.9-52-114-225-105-264,15a162.027,162.027,0,0,0-103.147,43.044c-30.633-45.365-87.1-72.091-145.206-58.044-52-114-225-105-264,15-75,3-140,59-152,133-53,5-127,23-130,83-2,42,35,72,70,86,49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33,61.112,8.015,113.854-5.72,150.492-29.764a165.62,165.62,0,0,0,110.861-3.236c47,94,178,113,251,33,31.385,4.116,60.563,2.495,86.487-3.311,25.924,5.806,55.1,7.427,86.488,3.311,73,80,204,61,251-33a165.625,165.625,0,0,0,120,0c51,13,108,15,157-5a147.188,147.188,0,0,0,33.5-18.694,147.217,147.217,0,0,0,33.5,18.694c49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33C2446.709,1093.793,2554.709,922.793,2379.709,863.793Z" transform="translate(142.69 -634.312)" fill="#eee"/>
  </svg>

</div>

<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * * * The content above * * * * * * * * * * * -->
<!-- * * * * * * * * * * is only a placeholder * * * * * * * * * * -->
<!-- * * * * * * * * * * and can be replaced. * * * * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * * End of Placeholder * * * * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->



<router-outlet></router-outlet>
